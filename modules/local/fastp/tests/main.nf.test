nextflow_process {

    name "Test Process FASTP"
    script "../main.nf"
    process "FASTP"

    test("Should run with paired-end data") {

        when {
            process {
                """
                input[0] = [ [ id:'test', single_end:false ], [ file(params.test_data[0]), file(params.test_data[1]) ] ]
                """
            }
        }

        then {
            assert process.success
            assert snapshot(process.out).match()
        }
    }

    test("Should run with single-end data") {

        when {
            process {
                """
                input[0] = [ [ id:'test_single', single_end:true ], file(params.test_data[2]) ]
                """
            }
        }

        then {
            assert process.success
            assert snapshot(process.out).match()
        }
    }
}