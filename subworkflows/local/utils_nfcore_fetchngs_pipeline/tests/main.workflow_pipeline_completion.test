nextflow_workflow {

    name "Test Workflow PIPELINE_COMPLETION"
    script "subworkflows/local/utils_nfcore_fetchngs_pipeline/main.nf"
    workflow "PIPELINE_COMPLETION"
    tag 'subworkflows'
    tag 'utils_nfcore_fetchngs_pipeline'
    tag 'subworkflows/utils_nfcore_fetchngs_pipeline'

    test("Should run") {

        when {
            params {
                outdir = "tests/results"
            }
            workflow {
                """
                input_type      = 'sra'
                email           = null
                email_on_fail   = null
                plaintext_email = false
                outdir          = "tests/results"
                monochrome_logs = false
                hook_url        = null

                input[0] = input_type
                input[1] = email
                input[2] = email_on_fail
                input[3] = plaintext_email
                input[4] = outdir
                input[5] = monochrome_logs
                input[6] = hook_url
                """
            }
        }

        then {
            assertAll(
                { assert workflow.success }
            )
        }
    }
}
